<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>TCP Connection Analyzer</title>
    </head>
    <body>
        <h1>TCP Connections</h1>
        <script>
            async function fetchConnections() {
                try {
                    const res = await fetch("http://localhost:5000/api/capture/start");
                    const data = await rest.json();

                    print(data);
                } catch(err) {
                    console.error("Failed to fetch connections", err)
                }
            }
            fetchConnections()
            // Create a connection to the SSE endpoint
            const eventSource = new EventSource("/api/capture/stream");

            // Handle incoming messages
            eventSource.onmessage = function(event) {
                console.log("Received SSE:", event.data);

                // Optionally append to the page
                const log = document.getElementById("log");
                log.textContent += event.data + "\n";
            };

            eventSource.onerror = function(err) {
                console.error("SSE error:", err);
            };

            // Optionally handle connection open
            eventSource.onopen = function() {
                console.log("SSE connection opened");
            };
    </script>
    </body>
</html>